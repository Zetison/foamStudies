#!/bin/bash
MODEL_NAME="cylinder"
name=${1:-$MODEL_NAME}
pathToFolder="$HOME/OpenFOAM/OpenFOAM-v1912/run/$name"
rm -rf $pathToFolder/*
mkdir -p $pathToFolder
cp -r ./* $pathToFolder
cd $pathToFolder

NP=4    	# Number of processors

./sed_parameters $MODEL_NAME $NP "openfoam" 

g++ generate_blockMeshDict_file.c -o generate_blockMeshDict_file
./generate_blockMeshDict_file "openfoam"
blockMesh

decomposePar
mpirun -np $NP pisoFoam -parallel

python3.7 convertDatToCSV.py
python3.7 exportResults.py && cat results_OF.txt 
paraview --script=postProcScript.py

